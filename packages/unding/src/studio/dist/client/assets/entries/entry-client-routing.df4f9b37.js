function sn(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function Fe(e,t){let n;{var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=r}return sn()&&(n.stack=an(n.stack,t)),n}function an(e,t){if(!e)return e;const n=un(e);let r=0;return n.filter(o=>o.includes(" (internal/")||o.includes(" (node:internal")?!1:r<t&&ln(o)?(r++,!1):!0).join(`
`)}function ln(e){return e.startsWith("    at ")}function un(e){return e.split(/\r?\n/)}function O(e,t){const n=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return n[e]=n[e]||t}function w(e){return typeof e=="object"&&e!==null}function Se(e){return Array.from(new Set(e))}const A=O("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),cn="The client runtime of Server Routing as well as the client runtime of Client Routing are both being loaded. Make sure they aren't loaded both at the same time for a given page. See https://vite-plugin-ssr.com/client-runtimes-conflict",st="Two vite-plugin-ssr client runtime instances are being loaded. Make sure your client-side bundles don't include vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)";function at(){{const e=Se(A.instances);if(e.length>1){const t=`Both vite-plugin-ssr@${e[0]} and vite-plugin-ssr@${e[1]} loaded. Only one version should be loaded.`;gn(!1,t)}}A.checkSingleInstance&&A.instances.length>1&&ye(!1,st,{onlyOnce:!0,showStackTrace:!0})}function fn(e){ye(A.isClientRouting!==!1,cn,{onlyOnce:!0,showStackTrace:!0}),ye(A.isClientRouting===void 0,st,{onlyOnce:!0,showStackTrace:!0}),A.isClientRouting=!0,e&&(A.checkSingleInstance=!0),at()}function dn(e){A.instances.push(e),at()}function gn(e,t){if(e)return;const n=`[vite-plugin-ssr][Wrong Usage] ${t}`;throw new Error(n)}function ye(e,t,{onlyOnce:n,showStackTrace:r}){if(e)return;const i=`[vite-plugin-ssr][Warning] ${t}`;if(n){const{alreadyLogged:o}=A,a=n===!0?i:n;if(o.has(a))return;o.add(a)}console.warn(r?new Error(i):i)}const hn="0.4.140",B={projectName:"vite-plugin-ssr",projectVersion:hn,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};dn(B.projectVersion);const lt=new Proxy(e=>e,{get:()=>lt}),C=lt,P=O("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},showStackTraceList:new WeakSet}),pn=`[${B.npmPackageName}]`,mn=`[${B.npmPackageName}@${B.projectVersion}]`,_e=2;function s(e,t){var o;if(e)return;const n=(()=>{if(!t)return null;const a=typeof t=="string"?t:"`"+JSON.stringify(t)+"`";return`Debug info (this is for the ${B.projectName} maintainers; you can ignore this): ${a}`})();let r=[`You stumbled upon a bug in ${B.projectName}'s source code.`,`Go to ${B.githubRepository}/issues/new and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,n].filter(Boolean).join(" ");r=G(r),r=ae(r,"Bug"),r=Y(r,!0);const i=Fe(r,_e);throw(o=P.onBeforeLog)==null||o.call(P),i}function d(e,t,{showStackTrace:n}={}){var i;if(e)return;t=G(t),t=ae(t,"Wrong Usage"),t=Y(t);const r=Fe(t,_e);throw n&&P.showStackTraceList.add(r),(i=P.onBeforeLog)==null||i.call(P),r}function ut(e){return e=G(e),e=ae(e,"Error"),e=Y(e),Fe(e,_e)}function b(e,t,{onlyOnce:n,showStackTrace:r}){var i;if(!e){if(t=G(t),t=ae(t,"Warning"),t=Y(t),n){const{alreadyLogged:o}=P,a=n===!0?t:n;if(o.has(a))return;o.add(a)}if((i=P.onBeforeLog)==null||i.call(P),r){const o=new Error(t);P.showStackTraceList.add(o),P.logger(o,"warn")}else P.logger(t,"warn")}}function Ce(e,t,{onlyOnce:n}){var r;if(!e){if(t=G(t),t=Y(t),n){const{alreadyLogged:i}=P,o=t;if(i.has(o))return;i.add(o)}(r=P.onBeforeLog)==null||r.call(P),P.logger(t,"info")}}function ae(e,t){let n=`[${t}]`;const r=t==="Warning"?"yellow":"red";return n=C.bold(C[r](n)),`${n}${e}`}function G(e){return e.startsWith("[")?e:` ${e}`}function Y(e,t=!1){return`${t?mn:pn}${e}`}function j(){return typeof window<"u"&&typeof window.scrollY=="number"}const ct=O("utils/assertRouterType.ts",{});function W(){yn(ft()),ct.isClientRouting=!0}function ft(){return ct.isClientRouting!==!1}function yn(e){d(j(),"`import { something } from 'vite-plugin-ssr/client/router'` is forbidden on the server-side",{showStackTrace:!0}),b(e,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle.",{showStackTrace:!0,onlyOnce:!0})}const vn=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],dt=["vue","svelte","marko","md","mdx"],bn=[...vn,...dt];function gt(e){const t=bn.some(n=>e.endsWith("."+n));return s(!Pn(e)||t),t}function Pn(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function wn(e){return dt.some(t=>e.endsWith("."+t))}function k(e,t,n){return typeof e=="string"?We(e.split(""),t,n).join(""):We(e,t,n)}function We(e,t,n){const r=[];let i=t>=0?t:e.length+t;s(i>=0&&i<=e.length);let o=n>=0?n:e.length+n;for(s(o>=0&&o<=e.length);!(i===o||(i===e.length&&(i=0),i===o));){const a=e[i];s(a!==void 0),r.push(a),i++}return r}function Oe(e){return e.startsWith("/")||e.startsWith("http")||e.startsWith("tauri://")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function Rn(e,t){s(t.includes(" but ")),d(typeof e=="string",`${t} should be a string`),!Oe(e)&&(!e.startsWith("/")&&!e.includes(":")?d(!1,`${t} is '${e}' and it should be '/${e}' instead (URL pathnames should start with a leading slash)`):d(!1,`${t} isn't a valid URL`))}function M(e,t){s(Oe(e),{url:e}),s(t.startsWith("/"),{url:e,baseServer:t});const[n,...r]=e.split("#");s(n!==void 0);const i=["",...r].join("#")||null;s(i===null||i.startsWith("#"));const o=i===null?"":ve(i.slice(1)),[a,...l]=n.split("?");s(a!==void 0);const u=["",...l].join("?")||null;s(u===null||u.startsWith("?"),{url:e,searchOriginal:u});const c={},h={};Array.from(new URLSearchParams(u||"")).forEach(([y,H])=>{c[y]=H,h[y]=[...h[y]||[],H]});const{origin:f,pathnameResolved:v}=Fn(a,t);s(f===null||f===ve(f),{origin:f}),s(v.startsWith("/"),{url:e,pathnameResolved:v}),s(f===null||e.startsWith(f),{url:e,origin:f});const p=a.slice((f||"").length);Cn(e,f,p,u,i);let{pathname:R,hasBaseServer:_}=_n(v,t);return R=En(R),s(R.startsWith("/")),{origin:f,pathname:R,pathnameOriginal:p,hasBaseServer:_,search:c,searchAll:h,searchOriginal:u,hash:o,hashOriginal:i}}function ve(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function En(e){return e.split("/").map(t=>ve(t).split("/").join("%2F")).join("/")}function Fn(e,t){var l;if(e.startsWith("//"))return{origin:null,pathnameResolved:e};let n=!1;const r="tauri://",i="http://";e.startsWith(r)&&(n=!0,e=i+e.slice(r.length));let o,a;try{const u=new URL(e);o=u.origin,a=u.pathname}catch{o=null;let c=typeof window<"u"&&((l=window==null?void 0:window.document)==null?void 0:l.baseURI);c=c||"http://fake.example.org"+t,a=new URL(e,c).pathname}return a||(a="/"),n&&(s(o),s(o.startsWith(i)),o=r+o.slice(i.length)),s(a.startsWith("/"),{urlWithoutSearch:e,pathnameResolved:a}),s(a===a.split("?")[0].split("#")[0]),{origin:o,pathnameResolved:a}}function Sn(e){s(e.startsWith("/")),s(!e.includes("?")),s(!e.includes("#"))}function _n(e,t){Sn(e),s(Te(t));let n=e;if(s(n.startsWith("/")),s(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let r=t;return t.endsWith("/")&&n===k(t,0,-1)&&(r=k(t,0,-1),s(n===r)),n.startsWith(r)?(s(n.startsWith("/")||n.startsWith("http")),s(n.startsWith(r)),n=n.slice(r.length),n.startsWith("/")||(n="/"+n),s(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function Te(e){return e.startsWith("/")}function Cn(e,t,n,r,i){const o=On(t,n,r,i);s(e===o,{url:e,urlRecreated:o})}function On(e,t,n,r){return`${e||""}${t}${n||""}${r||""}`}function m(e,t){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}function D(e){return e instanceof Function||typeof e=="function"}function ee(e){return(t,n)=>{const r=e(t),i=e(n);return r===i?0:r>i?-1:1}}function L(e){return(t,n)=>{const r=e(t),i=e(n);if(s([!0,!1,null].includes(r)),s([!0,!1,null].includes(i)),r===i)return 0;if(r===!0||i===!1)return-1;if(i===!0||r===!1)return 1;s(!1)}}function Tn(e){return L(t=>{const n=e(t);return n===null?null:!n})}function g(e,t,n="unknown"){if(!w(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const r=e[t];return n==="array"?Array.isArray(r):n==="object"?w(r):n==="string[]"?Array.isArray(r)&&r.every(i=>typeof i=="string"):n==="function"?D(r):Array.isArray(n)?typeof r=="string"&&n.includes(r):n==="null"?r===null:n==="undefined"?r===void 0:n==="true"?r===!0:n==="false"?r===!1:typeof r===n}function I(e){return typeof e!="object"||e===null?!1:Object.getPrototypeOf(e)===null?!0:e.constructor.name==="Object"}function xn(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const An=e=>e!=null;function He(e){return"["+e.map(t=>"'"+t+"'").join(", ")+"]"}function ht(e){const t=n=>`Not a posix path: ${n}`;s(e!==null,t("null")),s(typeof e=="string",t(`typeof path === '${typeof e}'`)),s(e!=="",t("(empty string)")),s(e),s(!e.includes("\\"),t(e))}function fe(e,t){const n=Object.getOwnPropertyDescriptor(e,t);return!!n&&!("value"in n)&&!!n.get}function kn(e){return typeof e=="object"&&e!==null&&"then"in e&&D(e.then)}const $n=["$$registrations","_rerender_only"],In=[".md",".mdx"];function jn(e,t){Dn(e,t,!0)}function Dn(e,t,n){const i=Object.keys(e).filter(l=>!$n.includes(l)),o=i.filter(l=>l!=="default"),a=i.includes("default");if(o.length===0){if(a)return;s(i.length===0),d(!1,`${t} doesn't export any value, but it should have a \`export default\` instead`)}else if(!In.some(l=>t.endsWith(l))){const l=o.join(", ");n?b(o.length===0,`${t} should only have a default export: remove \`export { ${l} }\``,{onlyOnce:!0}):b(o.length===0,`${t} replace \`export { ${l} }\` with \`export default { ${l} }\``,{onlyOnce:!0})}}function Ln(e){return Object.entries(e)}const Bn=["clientRouting"];function Nn(e){Bn.forEach(t=>{if(s(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;d(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),d(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const pt=["render","clientRouting","prerender","doNotPrerender"];function Wn(e,t){d(!pt.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function Hn(e,t){const n={},r={},i={};if(e.forEach(l=>{Un(l).forEach(({exportName:c,exportValue:h,isFromDefaultExport:f})=>{s(c!=="default"),i[c]=i[c]??[],i[c].push({exportValue:h,exportSource:`${l.filePath} > ${f?`\`export default { ${c} }\``:`\`export { ${c} }\``}`,filePath:l.filePath,_filePath:l.filePath,_fileType:l.fileType,_isFromDefaultExport:f})})}),t){const{configValues:l}=t;Ln(l).forEach(([u,c])=>{const h=t.configElements[u];s(h);const{configDefinedByFile:f,configDefinedAt:v}=h;s(f),r[u]=r[u]??c,n[u]=n[u]??[],s(n[u].length===0),n[u].push({configValue:c,configDefinedAt:v,configDefinedByFile:f});const p=u;i[p]=i[p]??[],i[p].push({exportValue:c,exportSource:v,filePath:f,_filePath:f,_fileType:null,_isFromDefaultExport:null})})}const o=Vn(),a={};return Object.entries(i).forEach(([l,u])=>{u.forEach(({exportValue:c,_fileType:h,_isFromDefaultExport:f})=>{a[l]=a[l]??c,h===".page"&&!f&&(l in o||(o[l]=c))})}),s(!("default"in a)),s(!("default"in i)),{config:r,configEntries:n,exports:a,exportsAll:i,pageExports:o}}function Un(e){const{filePath:t,fileExports:n}=e;s(n),s(gt(t));const r=[];return Object.entries(n).sort(Tn(([i])=>i==="default")).forEach(([i,o])=>{let a=i==="default";if(a)if(wn(t))i="Page";else{d(w(o),`The \`export default\` of ${t} should be an object.`),Object.entries(o).forEach(([l,u])=>{Wn(l,t),r.push({exportName:l,exportValue:u,isFromDefaultExport:a})});return}r.push({exportName:i,exportValue:o,isFromDefaultExport:a})}),r.forEach(({exportName:i,isFromDefaultExport:o})=>{s(!(o&&pt.includes(i)))}),r}function Vn(){return new Proxy({},{get(...e){return j()||b(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function zn(e){const t=".page.",n=k(e.split(t),0,-1).join(t);return s(!n.includes("\\")),n}function N(e){ht(e)}function mt(e,t){if(t.length>0){const r=t.filter(i=>i.isErrorPage);return r.length===0?null:(d(r.length===1,"Only one error page can be defined"),r[0].pageId)}const n=Se(e.map(({pageId:r})=>r).filter(r=>J(r)));if(d(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const r=n[0];return s(r),r}return null}function J(e,t){return s(!e.includes("\\")),e.includes("/_error")}function Gn(e,t){if(t.length>0){const n=t.find(r=>r.pageId===e);return s(n),n.isErrorPage}else return J(e)}const Yn=[".page",".page.server",".page.route",".page.client",".css"];function Mn(e){if(ht(e),e.endsWith(".css"))return".css";s(gt(e),e);const n=e.split("/").slice(-1)[0].split("."),r=n.slice(-3)[0],i=n.slice(-2)[0];if(i==="page")return".page";if(s(r==="page",e),i==="server")return".page.server";if(i==="client")return".page.client";if(i==="route")return".page.route";s(!1,e)}function yt(e){const t=o=>i.pageId===o||i.isDefaultPageFile&&(Ue(i.filePath)||Jn(o,i.filePath)),n=Mn(e),i={filePath:e,fileType:n,isEnv:o=>{if(s(n!==".page.route"),o==="CLIENT_ONLY")return n===".page.client"||n===".css";if(o==="SERVER_ONLY")return n===".page.server";if(o==="CLIENT_AND_SERVER")return n===".page";s(!1)},isRelevant:t,isDefaultPageFile:be(e),isRendererPageFile:n!==".css"&&be(e)&&Ue(e),isErrorPageFile:J(e),pageId:zn(e)};return i}function be(e){return N(e),J(e)?!1:e.includes("/_default")}function Ue(e){return N(e),e.includes("/renderer/")}function Jn(e,t){N(e),N(t),s(!e.endsWith("/")),s(!t.endsWith("/")),s(be(t));const n=k(t.split("/"),0,-1).filter(r=>r!=="_default").join("/");return e.startsWith(n)}function Kn(e){s(Array.isArray(e)||e===null),s(e!==null),e.forEach(t=>{s(w(t)),s(g(t,"pageId","string")),s(g(t,"routeFilesystem","string")||g(t,"routeFilesystem","null")),s(g(t,"routeFilesystemDefinedBy","string")||g(t,"routeFilesystemDefinedBy","null")),s(g(t,"loadCodeFiles","function")),s(g(t,"isErrorPage","boolean")),s(g(t,"configElements","object")),vt(t.configElements,!1)})}function qn(e){vt(e,!0)}function vt(e,t){s(w(e)),Object.entries(e).forEach(([n,r])=>{if(s(w(r)||r===null),r===null){s(t);return}s(g(r,"configDefinedAt","string")),s(g(r,"plusConfigFilePath","string")||g(r,"plusConfigFilePath","null")),s(g(r,"configEnv","string")),s(g(r,"codeFilePath","string")||g(r,"codeFilePath","null")),s(g(r,"codeFileExport","string")||g(r,"codeFileExport","null")),s(g(r,"configValueSerialized","string")||g(r,"configValueSerialized","undefined")),(t||n==="route")&&s(g(r,"configValue")||g(r,"configValueSerialized"))})}const Xn=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],r=t[2];return new RegExp(n,r)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function le(e){const t=JSON.parse(e);return bt(t)}function bt(e){return typeof e=="string"?Qn(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=bt(n)}),e)}function Qn(e){for(const{match:t,deserialize:n}of Xn)if(t(e))return n(e,le);return e}function Zn(e){e.forEach(t=>{Object.entries(t.configElements).forEach(([n,r])=>{er(r),n==="route"&&tr(r)})})}function er(e){const{configValueSerialized:t}=e;t!==void 0&&(e.configValue=le(t))}function tr(e){s(g(e,"configValue"));const{configValue:t}=e,n=typeof t;d(n==="string"||D(t),`${e.configDefinedAt} has an invalid type '${n}': it should be a string or a function instead, see https://vite-plugin-ssr.com/route`)}function nr(e){s(g(e,"isGeneratedFile")),s(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),s(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),s(g(e,"pageFilesLazy","object")),s(g(e,"pageFilesEager","object")),s(g(e,"pageFilesExportNamesLazy","object")),s(g(e,"pageFilesExportNamesEager","object")),s(g(e.pageFilesLazy,".page")),s(g(e.pageFilesLazy,".page.client")||g(e.pageFilesLazy,".page.server")),s(g(e,"pageFilesList","string[]")),s(g(e,"pageConfigs")),s(g(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;Kn(t),Zn(t),qn(n);const r={};X(e.pageFilesLazy).forEach(({filePath:o,pageFile:a,globValue:l})=>{a=r[o]=r[o]??a;const u=l;Ve(u),a.loadFile=async()=>{"fileExports"in a||(a.fileExports=await u(),Nn(a))}}),X(e.pageFilesExportNamesLazy).forEach(({filePath:o,pageFile:a,globValue:l})=>{a=r[o]=r[o]??a;const u=l;Ve(u),a.loadExportNames=async()=>{if(!("exportNames"in a)){const c=await u();d("exportNames"in c,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),s(g(c,"exportNames","string[]"),a.filePath),a.exportNames=c.exportNames}}}),X(e.pageFilesEager).forEach(({filePath:o,pageFile:a,globValue:l})=>{a=r[o]=r[o]??a;const u=l;s(w(u)),a.fileExports=u}),X(e.pageFilesExportNamesEager).forEach(({filePath:o,pageFile:a,globValue:l})=>{a=r[o]=r[o]??a;const u=l;s(w(u)),s(g(u,"exportNames","string[]"),a.filePath),a.exportNames=u.exportNames}),e.pageFilesList.forEach(o=>{r[o]=r[o]??yt(o)});const i=Object.values(r);return i.forEach(({filePath:o})=>{s(!o.includes("\\"))}),{pageFiles:i,pageConfigs:t,pageConfigGlobal:n}}function X(e){const t=[];return Object.entries(e).forEach(([n,r])=>{s(Yn.includes(n)),s(w(r)),Object.entries(r).forEach(([i,o])=>{const a=yt(i);s(a.fileType===n),t.push({filePath:i,pageFile:a,globValue:o})})}),t}function Ve(e){s(D(e))}const $=O("setPageFiles.ts",{});function rr(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:r}=nr(e);$.pageFilesAll=t,$.pageConfigs=n,$.pageConfigGlobal=r}async function ir(e,t){e?(s(!$.pageFilesGetter),s(t===void 0)):(s($.pageFilesGetter),s(typeof t=="boolean"),(!$.pageFilesAll||!t)&&await $.pageFilesGetter());const{pageFilesAll:n,pageConfigs:r,pageConfigGlobal:i}=$;s(n&&r&&i);const o=or(n,r);return{pageFilesAll:n,allPageIds:o,pageConfigs:r,pageConfigGlobal:i}}function or(e,t){const n=e.filter(({isDefaultPageFile:o})=>!o).map(({pageId:o})=>o),r=Se(n),i=t.map(o=>o.pageId);return[...r,...i]}function xe(e,t){return wt(e,t,!0)}function Pt(e,t){return wt(e,t,!1)}function wt(e,t,n){const r=n?"CLIENT_ONLY":"SERVER_ONLY",i=e.filter(p=>p.isRelevant(t)&&p.fileType!==".page.route").sort(sr(n,t)),o=p=>{const R=i.filter(y=>y.pageId===t&&y.isEnv(p?"CLIENT_AND_SERVER":r));d(R.length<=1,`Merge the following files into a single file: ${R.map(y=>y.filePath).join(" ")}`);const _=R[0];return s(_===void 0||!_.isDefaultPageFile),_},a=o(!1),l=o(!0),u=p=>i.filter(R=>R.isRendererPageFile&&R.isEnv(p?"CLIENT_AND_SERVER":r))[0],c=u(!1),h=u(!0),f=i.filter(p=>p.isDefaultPageFile&&!p.isRendererPageFile&&(p.isEnv(r)||p.isEnv("CLIENT_AND_SERVER")));return[a,l,...f,c,h].filter(An)}function sr(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",r=-1,i=1,o=0;return(a,l)=>{if(!a.isDefaultPageFile&&l.isDefaultPageFile)return r;if(!l.isDefaultPageFile&&a.isDefaultPageFile)return i;{const u=a.isRendererPageFile,c=l.isRendererPageFile;if(!u&&c)return r;if(!c&&u)return i;s(u===c)}{const u=ze(t,a.filePath),c=ze(t,l.filePath);if(u<c)return r;if(c<u)return i;s(u===c)}{if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r;if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return i}return o}}function ze(e,t){N(e),N(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const r=e.slice(n),i=t.slice(n),o=r.split("/").length,a=i.split("/").length;return o+a}const ar="modulepreload",lr=function(e){return"/"+e},Ge={},de=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=lr(o),o in Ge)return;Ge[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":ar,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},Ae={},Rt={},ur={},ue={},cr=[],Et={},fr=!0,dr=[{pageId:"/pages/index",isErrorPage:!1,routeFilesystem:"/",routeFilesystemDefinedBy:"/pages/index/",loadCodeFiles:async()=>(await de(()=>import("./pages_index.e73e2568.js"),["assets/entries/pages_index.e73e2568.js","assets/chunks/chunk-9178fa73.js"])).default,configElements:{onRenderHtml:{configDefinedAt:"@unding/renderer/renderer/onRenderHtml",configDefinedByFile:"@unding/renderer/renderer/onRenderHtml",codeFilePath:"@unding/renderer/renderer/onRenderHtml",codeFileExport:"default",plusConfigFilePath:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",configEnv:"server-only"},onRenderClient:{configDefinedAt:"@unding/renderer/renderer/onRenderClient",configDefinedByFile:"@unding/renderer/renderer/onRenderClient",codeFilePath:"@unding/renderer/renderer/onRenderClient",codeFileExport:"default",plusConfigFilePath:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",configEnv:"client-only"},Page:{configDefinedAt:"/pages/index/+Page.svelte",configDefinedByFile:"/pages/index/+Page.svelte",codeFilePath:"/pages/index/+Page.svelte",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"\x1B[1m/pages/+config.h.js\x1B[22m > \x1B[36mexport default { passToClient }\x1B[39m",configDefinedByFile:"/pages/+config.h.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.js",configEnv:"server-only",configValueSerialized:'["pageProps"]'},clientRouting:{configDefinedAt:"\x1B[1m/pages/+config.h.js\x1B[22m > \x1B[36mexport default { clientRouting }\x1B[39m",configDefinedByFile:"/pages/+config.h.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"\x1B[1m/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js\x1B[22m > \x1B[36mexport default { hydrationCanBeAborted }\x1B[39m",configDefinedByFile:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",configEnv:"client-only",configValueSerialized:"true"},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},onBeforeRenderEnv:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"client-only",configValueSerialized:"null"}}},{pageId:"/pages/studio",isErrorPage:!1,routeFilesystem:"/studio",routeFilesystemDefinedBy:"/pages/studio/",loadCodeFiles:async()=>(await de(()=>import("./pages_studio.15c635df.js"),["assets/entries/pages_studio.15c635df.js","assets/chunks/chunk-9178fa73.js"])).default,configElements:{onRenderHtml:{configDefinedAt:"@unding/renderer/renderer/onRenderHtml",configDefinedByFile:"@unding/renderer/renderer/onRenderHtml",codeFilePath:"@unding/renderer/renderer/onRenderHtml",codeFileExport:"default",plusConfigFilePath:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",configEnv:"server-only"},onRenderClient:{configDefinedAt:"@unding/renderer/renderer/onRenderClient",configDefinedByFile:"@unding/renderer/renderer/onRenderClient",codeFilePath:"@unding/renderer/renderer/onRenderClient",codeFileExport:"default",plusConfigFilePath:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",configEnv:"client-only"},Page:{configDefinedAt:"/pages/studio/+Page.svelte",configDefinedByFile:"/pages/studio/+Page.svelte",codeFilePath:"/pages/studio/+Page.svelte",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"\x1B[1m/pages/+config.h.js\x1B[22m > \x1B[36mexport default { passToClient }\x1B[39m",configDefinedByFile:"/pages/+config.h.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.js",configEnv:"server-only",configValueSerialized:'["pageProps"]'},clientRouting:{configDefinedAt:"\x1B[1m/pages/+config.h.js\x1B[22m > \x1B[36mexport default { clientRouting }\x1B[39m",configDefinedByFile:"/pages/+config.h.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"\x1B[1m/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js\x1B[22m > \x1B[36mexport default { hydrationCanBeAborted }\x1B[39m",configDefinedByFile:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",configEnv:"client-only",configValueSerialized:"true"},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},onBeforeRenderEnv:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"client-only",configValueSerialized:"null"}}},{pageId:"/pages/auth/login",isErrorPage:!1,routeFilesystem:"/auth/login",routeFilesystemDefinedBy:"/pages/auth/login/",loadCodeFiles:async()=>(await de(()=>import("./pages_auth_login.e44ac085.js"),["assets/entries/pages_auth_login.e44ac085.js","assets/chunks/chunk-9178fa73.js"])).default,configElements:{onRenderHtml:{configDefinedAt:"@unding/renderer/renderer/onRenderHtml",configDefinedByFile:"@unding/renderer/renderer/onRenderHtml",codeFilePath:"@unding/renderer/renderer/onRenderHtml",codeFileExport:"default",plusConfigFilePath:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",configEnv:"server-only"},onRenderClient:{configDefinedAt:"@unding/renderer/renderer/onRenderClient",configDefinedByFile:"@unding/renderer/renderer/onRenderClient",codeFilePath:"@unding/renderer/renderer/onRenderClient",codeFileExport:"default",plusConfigFilePath:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",configEnv:"client-only"},Page:{configDefinedAt:"/pages/auth/login/+Page.svelte",configDefinedByFile:"/pages/auth/login/+Page.svelte",codeFilePath:"/pages/auth/login/+Page.svelte",codeFileExport:"default",plusConfigFilePath:null,configEnv:"server-and-client"},passToClient:{configDefinedAt:"\x1B[1m/pages/+config.h.js\x1B[22m > \x1B[36mexport default { passToClient }\x1B[39m",configDefinedByFile:"/pages/+config.h.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.js",configEnv:"server-only",configValueSerialized:'["pageProps"]'},clientRouting:{configDefinedAt:"\x1B[1m/pages/+config.h.js\x1B[22m > \x1B[36mexport default { clientRouting }\x1B[39m",configDefinedByFile:"/pages/+config.h.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/pages/+config.h.js",configEnv:"server-and-client",configValueSerialized:"true"},hydrationCanBeAborted:{configDefinedAt:"\x1B[1m/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js\x1B[22m > \x1B[36mexport default { hydrationCanBeAborted }\x1B[39m",configDefinedByFile:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"/Users/gu-stav/Development/unding-vite-plugin-ssr-wrapper/packages/renderer/src/renderer/+config.js",configEnv:"client-only",configValueSerialized:"true"},isClientSideRenderable:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"server-and-client",configValueSerialized:"true"},onBeforeRenderEnv:{configDefinedAt:"TODO",configDefinedByFile:"TODO",codeFilePath:null,codeFileExport:null,plusConfigFilePath:"TODO",configEnv:"client-only",configValueSerialized:"null"}}}],gr={onBeforeRoute:null},hr=Object.assign({}),pr={...hr};Ae[".page"]=pr;const mr=Object.assign({}),yr={...mr};ue[".page"]=yr;const vr=Object.assign({}),br={...vr};ue[".page.server"]=br;const Pr=Object.assign({}),wr={...Pr};Rt[".page.route"]=wr;const Rr=Object.assign({}),Er={...Rr};Ae[".page.client"]=Er;const Fr=Object.assign({}),Sr={...Fr};ue[".page.client"]=Sr;const _r=Object.assign({}),Cr={..._r};Et[".page.server"]=Cr;const Or=Object.freeze(Object.defineProperty({__proto__:null,isGeneratedFile:fr,neverLoaded:Et,pageConfigGlobal:gr,pageConfigs:dr,pageFilesEager:Rt,pageFilesExportNamesEager:ue,pageFilesExportNamesLazy:ur,pageFilesLazy:Ae,pageFilesList:cr},Symbol.toStringTag,{value:"Module"}));rr(Or);function Ft(){s(j())}function Tr(){Ft(),W()}function xr(){Ft()}function Ye(e){const t=e/1e3;if(t<120){const n=Me(t);return`${n} second${Je(n)}`}{const n=t/60,r=Me(n);return`${r} minute${Je(r)}`}}function Me(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function Je(e){return e==="1"?"":"s"}const Ar=O("utils/executeHook.ts",{userHookErrors:new Map});function ce(e,t,n){const{timeoutErr:r,timeoutWarn:i}=kr(t);let o,a;const l=new Promise((f,v)=>{o=p=>{u(),f(p)},a=p=>{u(),v(p)}}),u=()=>{clearTimeout(c),clearTimeout(h)},c=setTimeout(()=>{b(!1,`The ${t}() hook defined by ${n} is taking more than ${Ye(i)}`,{onlyOnce:!1})},i),h=setTimeout(()=>{const f=ut(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${Ye(r)}`);a(f)},r);return(async()=>{try{const f=await e();o(f)}catch(f){w(f)&&Ar.userHookErrors.set(f,{hookName:t,hookFilePath:n}),a(f)}})(),l}function kr(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function K(e){const t=window.location.href,{searchOriginal:n,hashOriginal:r,pathname:i}=M(t,"/");let o;return e!=null&&e.withoutHash?o=`${i}${n||""}`:o=`${i}${n||""}${r||""}`,s(o.startsWith("/")),o}xr();function $r(){var r,i,o,a;const e=!!((i=(r=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:r.renderers)!=null&&i.size),t=!!((a=(o=window.__REACT_DEVTOOLS_GLOBAL_HOOK__)==null?void 0:o.rendererInterfaces)!=null&&a.size),n=!!window.__vite_plugin_react_preamble_installed__;return e||t||n}function St(e,t){const n=Object.keys,r=typeof e;return e&&t&&r==="object"&&r===typeof t?n(e).length===n(t).length&&n(e).every(o=>St(e[o],t[o])):e===t}function Ir(e,t){return w(e)&&w(t)&&e.constructor===t.constructor&&St({...e,stack:null},{...t,stack:null})&&t.message===t.message}function ne(e){window.location.href=e}function jr(e){return new Promise(t=>setTimeout(t,e))}function Dr(e,t){let n=!1;return()=>{n||(n=!0,setTimeout(()=>{n=!1,e()},t))}}Tr();const Ke=O("navigationState.ts",{}),Lr=K(),_t={markNavigationChange(){Ke.navigationChanged=!0},get noNavigationChangeYet(){return!Ke.navigationChanged&&this.isFirstUrl(K())},isFirstUrl(e){return e===Lr}};function Br(){const e="vite-plugin-ssr_pageContext",t=document.getElementById(e);d(t,`The element #${e} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;s(n);const r=le(n);return s(g(r,"_pageId","string")),m(r,{_hasPageContextFromServer:!0}),r}async function Nr(e,t){const r=Pt(e,t).filter(o=>o.fileType===".page.server");return await Promise.all(r.map(async o=>{o.exportNames||(s(o.loadExportNames,t),await o.loadExportNames())})),{hasOnBeforeRenderServerSideOnlyHook:r.some(({exportNames:o})=>(s(o),o.includes("onBeforeRender")))}}function Wr(e,t){if(!I(e))return!1;for(const n of Object.keys(e))if(!t.includes(n))return!1;return!0}function Hr(e){return typeof e=="object"&&e!==null&&Object.values(e).every(t=>typeof t=="string")}j()&&W();function Ct(e,t=!0){s(e.urlOriginal),"urlPathname"in e&&s(fe(e,"urlPathname")),Object.defineProperty(e,"urlPathname",{get:Tt,enumerable:t,configurable:!0}),"url"in e&&s(fe(e,"url")),Object.defineProperty(e,"url",{get:Ur,enumerable:!1,configurable:!0}),"urlParsed"in e&&s(fe(e,"urlParsed")),Object.defineProperty(e,"urlParsed",{get:Vr,enumerable:t,configurable:!0})}function Ot(e){let t=e._urlHandler;t||(t=o=>o);const n=e._urlRewrite??e.urlOriginal;s(n&&typeof n=="string");const r=t(n),i=e._baseServer;return s(i.startsWith("/")),M(r,i)}function Tt(){const{pathname:e}=Ot(this),t=e;return s(t.startsWith("/")),t}function Ur(){return b(!1,"`pageContext.url` is outdated. Use `pageContext.urlPathname`, `pageContext.urlParsed`, or `pageContext.urlOriginal` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)",{onlyOnce:!0,showStackTrace:!0}),Tt.call(this)}function Vr(){const e=Ot(this),{origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:a,hash:l,hashOriginal:u}=e,c=j(),h=v=>{b(c,`pageContext.urlParsed.${v} isn't available on the server-side (HTTP requests don't include the URL hash by design)`,{onlyOnce:!0,showStackTrace:!0})},f={origin:t,pathname:n,pathnameOriginal:r,search:i,searchAll:o,searchOriginal:a,get hash(){return h("hash"),l},get hashOriginal(){return h("hashOriginal"),u},get hashString(){return b(!1,"pageContext.urlParsed.hashString has been renamed to pageContext.urlParsed.hashOriginal",{onlyOnce:!0,showStackTrace:!0}),h("hashString"),u},get searchString(){return b(!1,"pageContext.urlParsed.searchString has been renamed to pageContext.urlParsed.searchOriginal",{onlyOnce:!0,showStackTrace:!0}),a}};return Q(f,"hashString"),Q(f,"searchString"),c||(Q(f,"hash"),Q(f,"hashOriginal")),f}function Q(e,t){const n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(e,t,{...n,enumerable:!1})}function zr(e){s(typeof e.urlOriginal=="string"),s(typeof e.urlPathname=="string"),s(I(e.urlParsed)),s(e.urlPathname===e.urlParsed.pathname)}const xt="@",Pe=":";function Gr(e,t="Invalid"){s(t.endsWith("Invalid")||t.endsWith("invalid")),d(e!=="",`${t} Route String ${x(e)} (empty string): set it to ${x("/")} instead`),d(e.startsWith("/")||e==="*",`${t} Route String ${x(e)}: Route Strings should start with a leading slash ${x("/")} (or be ${x("*")})`)}function we(e,t){Gr(e),s(t.startsWith("/"));const n=e.split("/"),r=t.split("/"),i={};Yr(e),e==="*"&&(e="/*");for(let o=0;o<Math.max(n.length,r.length);o++){const a=n[o],l=r[o];if(a==="*")return i["*"]=r.slice(Math.max(1,o)).join("/"),{routeParams:i};if(a&&te(a)){if(b(!a.startsWith(Pe),`Outdated Route String \`${e}\`, use \`${e.split(Pe).join(xt)}\` instead.`,{onlyOnce:!0}),!l)return null;i[a.slice(1)]=l}else if((a||"")!==(l||""))return null}return{routeParams:i}}function Yr(e){const t=e.split("*").length-1;d(t<=1,`Invalid Route String ${x(e)}: Route Strings aren't allowed to contain more than one glob ${x("*")}`),d(t===0||t===1&&e.endsWith("*"),`Invalid Route String ${x(e)}: make sure it ends with ${x("*")}`)}function U(e){const t=e.split("/").filter(a=>a!==""&&a!=="*");let n=0;for(const a of t){if(te(a))break;n++}const r=t.filter(a=>!te(a)).length,i=t.filter(a=>te(a)).length,o=e.endsWith("*");return{numberOfParameterSegments:i,numberOfStaticSegmentsBeginning:n,numberOfStaticSegements:r,isCatchAll:o}}function te(e){return e.startsWith(xt)||e.startsWith(Pe)}function qe(e){const n=we(e,e);return s(n),Object.keys(n.routeParams).length===0}function x(e){return j()?`'${e}'`:(e===""&&(e="''"),C.bold(e))}function Mr(e){e.sort(Jr).sort(L(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence<0)).sort(L(t=>t.routeType==="STRING"&&qe(t.routeString)===!1)).sort(L(t=>t.routeType==="FUNCTION"&&!t.precedence)).sort(L(t=>t.routeType==="STRING"&&qe(t.routeString)===!0)).sort(L(t=>t.routeType==="FILESYSTEM")).sort(L(t=>t.routeType==="FUNCTION"&&!!t.precedence&&t.precedence>0))}function Jr(e,t){{const n=e.precedence??0,r=t.precedence??0;if(n!==r)return n>r?-1:1}if(!t.routeString||!e.routeString)return 0;{const r=ee(i=>U(i).numberOfStaticSegmentsBeginning)(e.routeString,t.routeString);if(r!==0)return r}{const r=ee(i=>U(i).numberOfStaticSegements)(e.routeString,t.routeString);if(r!==0)return r}{const r=ee(i=>U(i).numberOfParameterSegments)(e.routeString,t.routeString);if(r!==0)return r}{if(U(t.routeString).isCatchAll)return-1;if(U(e.routeString).isCatchAll)return 1}return 0}async function Kr(e,t,n){zr(t);let r=e(t);if(At(r,`The Route Function ${n}`),r=await r,r===!1)return null;if(r===!0&&(r={}),d(I(r),`The Route Function ${n} should return a boolean or a plain JavaScript object, instead it returns \`${g(r,"constructor")?r.constructor:r}\`.`),"match"in r){const{match:a}=r;if(d(typeof a=="boolean",`The \`match\` value returned by the Route Function ${n} should be a boolean.`),!a)return null}let i=null;"precedence"in r&&(i=r.precedence,d(typeof i=="number",`The \`precedence\` value returned by the Route Function ${n} should be a number.`)),kt(r,`The \`routeParams\` object returned by the Route Function ${n} should`);const o=r.routeParams||{};return d(!("pageContext"in r),"Providing `pageContext` in Route Functions is prohibited, see https://vite-plugin-ssr.com/route-function#cannot-provide-pagecontext"),s(I(o)),Object.keys(r).forEach(a=>{d(a==="match"||a==="routeParams"||a==="precedence",`The Route Function ${n} returned an object with an unknown key \`{ ${a} }\`. Allowed keys: ['match', 'routeParams', 'precedence'].`)}),{precedence:i,routeParams:o}}function At(e,t){b(!kn(e),`${t} returned a promise, but asynchronous routing is deprecated and will be removed in the next major release, see https://vite-plugin-ssr.com/route-function#async`,{onlyOnce:!0})}function Xe(){const e=C.cyan("iKnowThePerformanceRisksOfAsyncRouteFunctions");b(!1,`${e} is deprecated and will be removed in the next major release`,{onlyOnce:!0})}function kt(e,t){s(t.endsWith(" should")),g(e,"routeParams")&&(s(t.endsWith(" should")),d(I(e.routeParams),`${t} be a plain JavaScript object.`),d(Hr(e.routeParams),`${t} only hold string values.`))}function $t(e,{hookName:t,hookFilePath:n}){if(e==null)return;s(!t.endsWith(")"));const r=`The \`pageContext\` object provided by the ${t}() hook defined by ${n}`;d(w(e),`${r} should be an object instead of \`${typeof e}\``),d(!("_objectCreatedByVitePluginSsr"in e),`${r} shouldn't be the whole \`pageContext\` object, see https://vite-plugin-ssr.com/pageContext-manipulation#do-not-return-entire-pagecontext`),b(!("_pageId"in e),`${r} sets \`pageContext._pageId\` which means that vite-plugin-ssr's routing is overriden. This is an experimental feature: make sure to contact a vite-plugin-ssr maintainer before using this.`,{onlyOnce:!0}),d(!("is404"in e),`${r} sets \`pageContext.is404\` which is forbidden, use \`throw render()\` instead, see https://vite-plugin-ssr.com/render`)}async function qr(e,t){let n=e.onBeforeRoute(t);At(n,`The onBeforeRoute() hook ${e.hookFilePath}`),n=await n;const r=`The onBeforeRoute() hook defined by ${e.hookFilePath}`;if(d(n==null||Wr(n,["pageContext"])&&g(n,"pageContext"),`${r} should return \`null\`, \`undefined\`, or a plain JavaScript object \`{ pageContext: { /* ... */ } }\`.`),n==null)return null;if(d(g(n,"pageContext","object"),`${r} returned \`{ pageContext }\` but pageContext should be a plain JavaScript object.`),g(n.pageContext,"_pageId")&&!g(n.pageContext,"_pageId","null")){const o=`${r} returned \`{ pageContext: { _pageId } }\` but _pageId should be`;d(g(n.pageContext,"_pageId","string"),`${o} a string or null`),d(t._allPageIds.includes(n.pageContext._pageId),`${o} one of following values: \`[${t._allPageIds.map(a=>`'${a}'`).join(", ")}]\`.`)}g(n.pageContext,"routeParams")&&kt(n.pageContext,`${r} returned \`{ pageContext: { routeParams } }\` but routeParams should`);const i={};return g(n.pageContext,"url")&&(b(!1,`${r} returned \`{ pageContext: { url } }\` but \`pageContext.url\` has been renamed to \`pageContext.urlOriginal\`. Return \`{ pageContext: { urlOriginal } }\` instead. (See https://vite-plugin-ssr.com/migration/0.4.23 for more information.)`,{onlyOnce:!0}),n.pageContext.urlOriginal=n.pageContext.url,delete n.pageContext.url),g(n.pageContext,"urlOriginal")&&(Rn(n.pageContext.urlOriginal,`${r} returned \`{ pageContext: { urlOriginal } }\` but urlOriginal`),m(i,{_urlOriginalPristine:t.urlOriginal})),$t(n.pageContext,{hookFilePath:e.hookFilePath,hookName:"onBeforeRoute"}),m(i,n.pageContext),i}var Z;function Qe(...e){var t;Z||(Z=(t=globalThis.__brillout_debug_createDebugger)==null?void 0:t.call(globalThis,"vps:routing")),Z&&Z(...e)}j()&&W();async function It(e){Ct(e),Qe("Pages routes:",e._pageRoutes);const t={};if(e._onBeforeRouteHook){const a=await qr(e._onBeforeRouteHook,e);if(a){if(m(t,a),g(t,"_pageId","string")||g(t,"_pageId","null"))return g(t,"routeParams")?s(g(t,"routeParams","object")):m(t,{routeParams:{}}),m(t,{_routingProvidedByOnBeforeRouteHook:!0,_routeMatches:"CUSTOM_ROUTE"}),{pageContextAddendum:t};m(e,t)}}m(t,{_routingProvidedByOnBeforeRouteHook:!1});const n=e._allPageIds;s(n.length>=0),d(e._pageFilesAll.length>0||e._pageConfigs.length>0,"No *.page.js file found. You must create at least one *.page.js file."),d(n.length>0,"You must create at least one *.page.js file that isn't _default.page.*");const{urlPathname:r}=e;s(r.startsWith("/"));const i=[];await Promise.all(e._pageRoutes.map(async a=>{const{pageId:l,routeType:u}=a;if(a.routeType==="FILESYSTEM"){const{routeString:c}=a,h=we(c,r);if(h){const{routeParams:f}=h;i.push({pageId:l,routeParams:f,routeString:c,routeType:u})}return}if(a.routeType==="STRING"){const{routeString:c}=a,h=we(c,r);if(h){const{routeParams:f}=h;s(u==="STRING"),i.push({pageId:l,routeString:c,routeParams:f,routeType:u})}return}if(a.routeType==="FUNCTION"){const{routeFunction:c,routeDefinedAt:h}=a,f=await Kr(c,e,h);if(f){const{routeParams:v,precedence:p}=f;i.push({pageId:l,precedence:p,routeParams:v,routeType:u})}return}s(!1)})),Mr(i);const o=i[0];if(Qe(`Route matches for URL \`${r}\` (in precedence order):`,i),m(t,{_routeMatches:i}),!o)return m(t,{_pageId:null,routeParams:{}}),{pageContextAddendum:t};{const{routeParams:a}=o;s(I(a)),m(t,{_pageId:o.pageId,routeParams:o.routeParams})}return{pageContextAddendum:t}}function z(e,t){if(!(t in e.exports))return null;const n=e.exports[t],r=e.exportsAll[t][0];if(s(r.exportValue===n),n===null)return null;const i=r.exportSource;return s(i),s(!t.endsWith(")")),d(D(n),`hook ${t}() defined by ${i} should be a function`),{hookFn:n,hookName:t,hookFilePath:i}}function ge(e,t){z(e,t)}function Xr(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[r])=>xn(n,r)).forEach(([n,r])=>{e[n]=r})}function Qr(e){Zr(e),ei(e)}function Zr(e){Gn(e._pageId,e._pageConfigs)&&s(g(e,"is404","boolean"))}function ei(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!w(t)){b(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const ti="not-serializable",re=O("getPageContextProxyForUser.ts",{});function ni(e){return s([!0,!1].includes(e._hasPageContextFromServer)),s([!0,!1].includes(e._hasPageContextFromClient)),new Proxy(e,{get(t,n){const r=e[n],i=JSON.stringify(n);return d(r!==ti,`pageContext[${i}] couldn't be serialized and, therefore, is missing on the client-side. Check the server logs for more information.`),ri(e,n,`pageContext[${i}] isn't available on the client-side because ${i} is missing in passToClient, see https://vite-plugin-ssr.com/passToClient`),r}})}function ri(e,t,n){re.prev===t||re.prev==="__v_raw"||(si(t),!(t in e)&&(oi(t)||e._hasPageContextFromServer&&!e._hasPageContextFromClient&&d(!1,n)))}const ii=["then","toJSON"];function oi(e){return!!(ii.includes(e)||typeof e=="symbol"||typeof e!="string"||e.startsWith("__v_"))}function si(e){re.prev=e,window.setTimeout(()=>{re.prev=void 0},0)}function ke(e,t){if(t){const i=e;s([!0,!1].includes(i.isHydration)),s([!0,!1,null].includes(i.isBackwardNavigation))}else{const i=e;s(i.isHydration===!0),s(i.isBackwardNavigation===null)}s("config"in e),s("configEntries"in e),s("exports"in e),s("exportsAll"in e),s("pageExports"in e),s(w(e.pageExports));const n=e.exports.Page;m(e,{Page:n}),ai(e),Xr(e);const r=ni(e);return Qr(e),r}function ai(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}function jt(e,t){const n=e.filter(i=>i.pageId===t);return s(n.length<=1),n[0]??null}async function li(e,t){const n={};return!t&&"configValues"in e||((await e.loadCodeFiles()).forEach(i=>{const{configName:o,codeFilePath:a}=i;if(i.isPlusFile){const{codeFileExports:l}=i;o!=="client"&&jn(l,a),Object.entries(l).forEach(([u,c])=>{const h=u!=="default",f=h?u:i.configName,v=c;if(n[f]=v,Ze(v,f,a),h){const p=e.configElements[i.configName];s(p),e.configElements[f]={configValue:v,codeFileExport:u,codeFilePath:a,configDefinedByFile:a,configDefinedAt:`${C.bold(a)} > ${C.cyan(`export { ${u} }`)}`,configEnv:p.configEnv,plusConfigFilePath:null}}})}else{const l=i.codeFileExportValue;n[o]=l,Ze(l,o,a)}}),Object.entries(e.configElements).map(([i,o])=>{o.codeFilePath||(n[i]=o.configValue)}),m(e,{configValues:n})),e}function Ze(e,t,n){s(!n.includes("+config.")),d(e!==null,`Set ${C.cyan(t)} to ${C.cyan("null")} in a ${C.bold("+config.js")} file instead of ${C.bold(n)}`)}const Dt="__whileFetchingAssets";async function ie(e,t,n){const r=xe(e,n),i=jt(t,n);let o;const a=!1;try{o=(await Promise.all([i&&li(i,a),...r.map(R=>{var _;return(_=R.loadFile)==null?void 0:_.call(R)})]))[0]}catch(p){throw ui(p)&&Object.assign(p,{[Dt]:!0}),p}const{config:l,configEntries:u,exports:c,exportsAll:h,pageExports:f}=Hn(r,o);return{config:l,configEntries:u,exports:c,exportsAll:h,pageExports:f,_pageFilesLoaded:r}}function $e(e){return e?e[Dt]===!0:!1}function ui(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const et=["urlPathname","urlParsed"],ci=["Page","pageExports","exports"];function Lt(e){[...ci,...et].forEach(n=>{n in e&&(et.includes(n)?(s(n.startsWith("url")),b(!1,`\`pageContext.${n}\` is already available in the browser when using Client Routing; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0})):b(!1,`\`pageContext.${n}\` is a built-in that cannot be overriden; including \`${n}\` in \`passToClient\` has no effect.`,{onlyOnce:!0}),delete e[n])})}const fi="/";function di(e,t,n){const{pathnameOriginal:r,searchOriginal:i,hashOriginal:o}=M(e,fi);e.startsWith("/")&&s(e===`${r}${i||""}${o||""}`,{url:e});const a=r.endsWith("/");let l;return n&&r!=="/"?(a?l=k(r,0,-1):l=r,s(!l.endsWith("/"),{url:e}),s(l!=="")):l=r+(a?"":"/")+"index",s(l),l=l+t,`${l}${i||""}${o||""}`}const gi=".pageContext.json",hi=!1;function pi(e){return di(e,gi,hi)}function oe(e,t,n){const r=e.configElements[t];if(!r||mi(e,t))return null;const{configValue:i,configDefinedAt:o}=r;return n&&d(typeof i===n,`${o} has an invalid type \`${typeof i}\`: is should be a ${n} instead`),i}function mi(e,t){const n=e.configElements[t];if(!n)return!0;const{codeFilePath:r,configValue:i}=n;return r?!1:i==null}function Bt(e,t){const n=t.find(r=>r.pageId===e);return s(t.length>0),s(n),n}function yi(e,t,n){s(!n.endsWith(" "));const r=[],i=Object.keys(e);for(const o of i)t.includes(o)||r.push(o);d(r.length===0,[n,"returned an object with following unknown keys:",He(r)+".","Only following keys are allowed:",He(t)+"."].join(" "))}function vi(e,t){if(e==null)return;const n=`The onBeforeRender() hook defined by ${t}`;d(I(e),`${n} should return a plain JavaScript object or \`undefined\`/\`null\``),yi(e,["pageContext"],n),e.pageContext&&$t(e.pageContext,{hookName:"onBeforeRender",hookFilePath:t})}async function bi(e,t){let n;if(e._pageFilesAll.length>0?(s(e._pageConfigs.length===0),n=Pi(e._pageId,e._pageFilesAll)):n=z(e,"guard"),!n)return;const r=n.hookFn;let i=e;const o=t(e);o&&(i=o);const a=await ce(()=>r(i),"guard",n.hookFilePath);d(a===void 0,`The guard() hook of ${n.hookFilePath} returns a value, but guard() doesn't accept any return value`)}function Pi(e,t){const n=t.find(l=>l.pageId===e&&l.fileType===".page.route");if(!n)return null;const{filePath:r,fileExports:i}=n;s(i);const o=i.guard;if(!o)return null;const a=r;return d(D(o),`guard() defined by ${a} should be a function`),{hookFn:o,hookName:"guard",hookFilePath:a}}function wi(e){const t=new Error("AbortRender");return m(t,{_pageContextAbort:e,[Nt]:!0}),t}const Nt="_isAbortError";function he(e){return typeof e=="object"&&e!==null&&Nt in e}function Ri(e){return e._urlRewrite||e._urlRedirect||e.abortStatusCode?(s(g(e,"_abortCall","string")),!0):!1}function Ei(e,t,n){if(t)return;const r=n._urlRewrite??n.urlOriginal;s(r);const i=e._pageContextAbort._abortCall;Ce(!1,`${Re(i)} intercepted while rendering ${C.bold(r)}`,{onlyOnce:!1})}function Fi(e){Si(e);const t={_urlRewrite:null};return e.forEach(n=>{Object.assign(t,n)}),t}function Si(e){const t=[];e.forEach(n=>{const r=n._urlRewrite;{const i=t.indexOf(r);if(i!==-1){const o=[...t.slice(i),r].map(a=>`render('${a}')`).join(" => ");d(!1,`Infinite loop of render() calls: ${o}`)}}t.push(r)})}function Re(e){return j()?"`"+e+"`":C.cyan(e)}function _i(e,t){const n=[e>0&&Re("throw render('/some-url')"),t>0&&Re("throw redirect('/some-url')")].filter(Boolean).join(" and ");d(e+t<=7,`Maximum chain length of 7 ${n} exceeded. Did you define an infinite loop of ${n}?`)}const Wt=O("router/getPageContext.ts",{});async function Ci(e){if(e._isFirstRenderAttempt&&_t.isFirstUrl(e.urlOriginal)){s(g(e,"_isFirstRenderAttempt","true"));const t=await Oi(e);return tt(t),t}else{s(g(e,"_isFirstRenderAttempt","false"));const t=await xi(e);return tt(t),t}}async function Oi(e){const t=Br();Lt(t),m(t,{isHydration:!0,_hasPageContextFromClient:!1}),m(t,await ie(e._pageFilesAll,e._pageConfigs,t._pageId));{const n={...e,...t};if(await $i(n)){const r=await Ut(n);m(t,r)}}return t}async function Ti(e){const t=mt(e._pageFilesAll,e._pageConfigs);if(!t)throw new Error("No error page defined.");const n={isHydration:!1,_pageId:t};return m(n,await Ht({...e,...n},!0)),n}async function xi(e){const t={isHydration:!1};return m(t,await Ii(e)),m(t,await Ht({...e,...t},!1)),t}async function Ht(e,t){let n={};if(m(n,await ie(e._pageFilesAll,e._pageConfigs,e._pageId)),!t&&await Ai({...e,...n})){const r=await Li(e);if(!r._isError)m(n,r);else{const i=mt(e._pageFilesAll,e._pageConfigs);s(i),n={},m(n,{isHydration:!1,_pageId:i}),m(n,await ie(e._pageFilesAll,e._pageConfigs,n._pageId)),s(g(r,"is404","boolean")),s(g(r,"pageProps","object")),s(g(r.pageProps,"is404","boolean")),s(!("serverSideError"in r)),m(n,r)}}else m(n,{_hasPageContextFromServer:!1}),t||await bi({_hasPageContextFromClient:!1,...e,...n},r=>ke(r,!0));{const r=await Ut({...e,...n});m(n,r)}return n}async function Ut(e){const t=z(e,"onBeforeRender");if(!t)return{_hasPageContextFromClient:!1};const n=t.hookFn,r={_hasPageContextFromClient:!0},i=ke({...e,...r},!0),o=await ce(()=>n(i),"onBeforeRender",t.hookFilePath);vi(o,t.hookFilePath);const a=o==null?void 0:o.pageContext;return m(r,a),r}async function Ai(e){return!!Wt.pageContextInitHasClientData||await ki(e)}function tt(e){e._pageContextInitHasClientData&&(Wt.pageContextInitHasClientData=!0)}async function ki(e){if(e._pageConfigs.length>0){const t=Bt(e._pageId,e._pageConfigs);return oe(t,"onBeforeRenderEnv")==="server-only"}else{const{hasOnBeforeRenderServerSideOnlyHook:t}=await Nr(e._pageFilesAll,e._pageId);return t}}async function $i(e){if(e._pageConfigs.length>0){const t=Bt(e._pageId,e._pageConfigs);return oe(t,"onBeforeRenderEnv")==="client-only"}else return!1}async function Ii(e){const n=(await It(e)).pageContextAddendum;if(!n._pageId){const r=new Error("No routing match");throw ji(r),r}return s(g(n,"_pageId","string")),n}function ji(e){m(e,{_is404:!0})}function Di(e){return w(e)&&e._is404===!0}async function Li(e){const t=e._urlRewrite??e._urlOriginalPristine??e.urlOriginal,n=pi(t),r=await fetch(n);{const a=r.headers.get("content-type"),l="application/json",u=a&&a.includes(l);if(!u&&r.status===404)throw ne(e.urlOriginal),Ni();d(u,`Wrong Content-Type for ${n}: it should be ${l} but it's ${a} instead. Make sure to properly use pageContext.httpResponse.headers, see https://vite-plugin-ssr.com/renderPage`)}const i=await r.text(),o=le(i);if(s(w(o)),"serverSideError"in o)throw ut("`pageContext` could not be fetched from the server as an error occurred on the server; check your server logs.");if(Ri(o))throw wi(o);return s(g(o,"_pageId","string")),Lt(o),m(o,{_hasPageContextFromServer:!0}),o}function Bi(e){return w(e)&&!!e._alreadyServerSideRouted}function Ni(){const e=new Error("Page doesn't exist");return Object.assign(e,{_alreadyServerSideRouted:!0}),e}function Wi(e,t){const r=t.filter(({filesystemRoot:o})=>e.startsWith(o)).sort(ee(({filesystemRoot:o})=>o.length))[0];let i;if(r){const{filesystemRoot:o,urlRoot:a}=r,l={pageId:e,filesystemRoot:o,urlRoot:a};s(a.startsWith("/")&&e.startsWith("/")&&o.startsWith("/"),l),s(e.startsWith(o),l),o!=="/"?(s(!o.endsWith("/"),l),i=k(e,o.length,0)):i=e,s(i.startsWith("/"),l),i=a+(a.endsWith("/")?"":"/")+k(i,1,0)}else i=e;return s(i.startsWith("/")),i=i.split("/").filter(o=>o!=="pages"&&o!=="src"&&o!=="index").join("/"),s(!i.includes(".page.")),s(!i.endsWith(".")),i.endsWith("/index")&&(i=k(i,0,-6)),i===""&&(i="/"),s(i.startsWith("/")),s(!i.endsWith("/")||i==="/"),i}async function Hi(e,t,n,r){await Promise.all(e.filter(l=>l.fileType===".page.route").map(l=>{var u;return(u=l.loadFile)==null?void 0:u.call(l)}));const{onBeforeRouteHook:i,filesystemRoots:o}=Vi(e,t,n);return{pageRoutes:Ui(o,e,t,r),onBeforeRouteHook:i}}function Ui(e,t,n,r){const i=[];let o=[...r];if(n.length>0){s(e===null);const a=!0;n.filter(l=>!l.isErrorPage).forEach(l=>{const u=l.pageId;o=Gi(o,u);let c=null;{const h=l.configElements.route;if(h){s("configValue"in h);const f=h.configValue,v=h.configDefinedAt;s(v),typeof f=="string"?c={pageId:u,comesFromV1PageConfig:a,routeString:f,routeDefinedAt:v,routeType:"STRING"}:(s(D(f)),l.configElements.iKnowThePerformanceRisksOfAsyncRouteFunctions&&Xe(),c={pageId:u,comesFromV1PageConfig:a,routeFunction:f,routeDefinedAt:v,routeType:"FUNCTION"})}}if(!c){const{routeFilesystem:h,routeFilesystemDefinedBy:f}=l;s(h),s(h.startsWith("/")),s(f),c={pageId:u,routeFilesystemDefinedBy:f,comesFromV1PageConfig:a,routeString:h,routeDefinedAt:null,routeType:"FILESYSTEM"}}s(c),i.push(c)})}if(n.length===0){s(e);const a=!1;o.filter(l=>!J(l)).forEach(l=>{const u=t.find(c=>c.pageId===l&&c.fileType===".page.route");if(!u||!("default"in u.fileExports)){const c=Wi(l,e);s(c.startsWith("/")),s(!c.endsWith("/")||c==="/"),i.push({pageId:l,comesFromV1PageConfig:a,routeString:c,routeDefinedAt:null,routeFilesystemDefinedBy:`${l}.page.*`,routeType:"FILESYSTEM"})}else{const{filePath:c,fileExports:h}=u;if(s(h.default),g(h,"default","string")){const f=h.default;d(f.startsWith("/"),`A Route String should start with a leading slash '/' but ${c} has \`export default '${f}'\`. Make sure to \`export default '/${f}'\` instead.`),i.push({pageId:l,comesFromV1PageConfig:a,routeString:f,routeDefinedAt:c,routeType:"STRING"});return}if(g(h,"default","function")){const f=h.default;"iKnowThePerformanceRisksOfAsyncRouteFunctions"in h&&Xe(),i.push({pageId:l,comesFromV1PageConfig:a,routeFunction:f,routeDefinedAt:c,routeType:"FUNCTION"});return}d(!1,`The default export of ${c} should be a string or a function.`)}})}return i}function Vi(e,t,n){if(t.length>0){if(n.onBeforeRoute){const o=n.onBeforeRoute.configValue;if(o){const a=n.onBeforeRoute.codeFilePath;return s(a),d(D(o),`The hook onBeforeRoute() defined by ${a} should be a function.`),{onBeforeRouteHook:{hookFilePath:a,onBeforeRoute:o},filesystemRoots:null}}}return{onBeforeRouteHook:null,filesystemRoots:null}}let r=null;const i=[];return e.filter(o=>o.fileType===".page.route"&&o.isDefaultPageFile).forEach(({filePath:o,fileExports:a})=>{if(s(a),"onBeforeRoute"in a){d(g(a,"onBeforeRoute","function"),`\`export { onBeforeRoute }\` of ${o} should be a function.`);const{onBeforeRoute:l}=a;r={hookFilePath:`${o} > \`export { onBeforeRoute }\``,onBeforeRoute:l}}"filesystemRoutingRoot"in a&&(d(g(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} should be a string.`),d(g(a,"filesystemRoutingRoot","string"),`\`export { filesystemRoutingRoot }\` of ${o} is \`'${a.filesystemRoutingRoot}'\` but it should start with a leading slash \`/\`.`),i.push({filesystemRoot:zi(o),urlRoot:a.filesystemRoutingRoot}))}),{onBeforeRouteHook:r,filesystemRoots:i}}function zi(e){s(e.startsWith("/")),s(!e.endsWith("/"));const t=e.split("/"),n=k(t,0,-1).join("/")||"/";return s(n.startsWith("/")),s(!n.endsWith("/")||n==="/"),n}function Gi(e,t){const{length:n}=e;return e=e.filter(r=>r!==t),s(e.length===n-1),e}function Vt(){const e="/";return s(Yi(e)),e}function Yi(e){return e.startsWith("/")}const pe=O("createPageContext.ts",{});async function zt(e){pe.pageFilesData||(pe.pageFilesData=await ir(!0));const{pageFilesAll:t,allPageIds:n,pageConfigs:r,pageConfigGlobal:i}=pe.pageFilesData,{pageRoutes:o,onBeforeRouteHook:a}=await Hi(t,r,i,n),l=Vt();s(Te(l));const c={_objectCreatedByVitePluginSsr:!0,_urlHandler:null,_urlRewrite:null,_baseServer:l,_isProduction:!0,_pageFilesAll:t,_pageConfigs:r,_pageConfigGlobal:i,_allPageIds:n,_pageRoutes:o,_onBeforeRouteHook:a};return m(c,e),Ct(c),c}async function Gt(e){const t=await zt({urlOriginal:e}),n=await It(t),r=t._pageFilesAll,i=t._pageConfigs;if(!("pageContextAddendum"in n))return{pageId:null,pageFilesAll:r,pageConfigs:i};const o=n.pageContextAddendum._pageId;return o?{pageId:o,pageFilesAll:r,pageConfigs:i}:{pageId:null,pageFilesAll:r,pageConfigs:i}}function V(e){return e.fileType===".css"?[]:e.exportNames?e.exportNames:(s(e.fileExports,e.filePath),Object.keys(e.fileExports))}function Mi({pageFilesClientSide:e,pageFilesServerSide:t,pageId:n}){return{isHtmlOnly:r(),isClientRouting:o()};function r(){return t.some(l=>l.pageId===n&&l.fileType===".page")?(i(),!1):!(!t.some(l=>l.pageId===n&&l.fileType===".page.server")||e.some(l=>l.pageId===n&&l.fileType===".page.client"&&V(l).includes("render")))}function i(){const a=e.some(l=>V(l).includes("render"));d(a,["No client-side `render()` hook found.","See https://vite-plugin-ssr.com/render-modes for more information.",["Loaded client-side page files (none of them `export { render }`):",...e.map((l,u)=>` (${u+1}): ${l.filePath}`)].join(`
`)].join(" "))}function o(){return e.some(l=>V(l).includes("clientRouting"))}}function Ji({pageFilesClientSide:e,pageFilesServerSide:t,isHtmlOnly:n,isClientRouting:r}){let i=[];const o=t.filter(l=>!e.includes(l)),a=[];if(a.push(...e.map(l=>({id:l.filePath,onlyAssets:!1,eagerlyImported:!1}))),a.push(...o.map(l=>({id:l.filePath,onlyAssets:!0,eagerlyImported:!1}))),n)i=e.map(l=>l.filePath);else{const l=Ki(r);a.push({id:l,onlyAssets:!1,eagerlyImported:!1}),i=[l]}return{clientEntries:i,clientDependencies:a}}function Ki(e){return e?"@@vite-plugin-ssr/dist/esm/client/client-routing-runtime/entry.js":"@@vite-plugin-ssr/dist/esm/client/server-routing-runtime/entry.js"}function qi(e,t){let n=xe(e,t);const r=Pt(e,t),{isHtmlOnly:i,isClientRouting:o}=Mi({pageFilesClientSide:n,pageFilesServerSide:r,pageId:t});i&&(n=n.filter(u=>u.isEnv("CLIENT_ONLY")&&!V(u).includes("render")),n=Qi(n));const{clientEntries:a,clientDependencies:l}=Ji({pageFilesClientSide:n,pageFilesServerSide:r,isHtmlOnly:i,isClientRouting:o});return{isHtmlOnly:i,isClientRouting:o,clientEntries:a,clientDependencies:l,pageFilesClientSide:n,pageFilesServerSide:r}}async function Xi(e,t,{sharedPageFilesAlreadyLoaded:n}){const r=xe(e,t);await Promise.all(r.map(async i=>{var o;s(i.isEnv("CLIENT_ONLY")||i.isEnv("CLIENT_AND_SERVER")),!(n&&i.isEnv("CLIENT_AND_SERVER"))&&await((o=i.loadExportNames)==null?void 0:o.call(i))}))}function Qi(e){const t=[];for(const n of e)if(t.push(n),V(n).includes("overrideDefaultPages"))break;return t}function Zi(e,t,n){if(e){const r=oe(e,"clientRouting","boolean")??!1;return{isClientSideRenderable:oe(e,"isClientSideRenderable","boolean")??!1,isClientRouting:r}}else{const{isHtmlOnly:r,isClientRouting:i}=qi(t,n);return{isClientSideRenderable:!r,isClientRouting:i}}}async function Yt(e){const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Gt(e);if(!t)return!1;await Xi(n,t,{sharedPageFilesAlreadyLoaded:!1});const i=jt(r,t),{isClientSideRenderable:o,isClientRouting:a}=Zi(i,n,t);return o&&a}function Mt(e){return!e.startsWith("/")&&!e.startsWith(".")&&!e.startsWith("?")&&e!==""}function Jt(e){const t=e.getAttribute("href");return!!(t===null||t===""||Mt(t)||to(e)||no(t)||!ro(t)||!Oe(t)||!eo(e))}function eo(e){if(_o()){const n=e.getAttribute("data-vike-link");return n!==null&&n!=="false"}else return!0}function to(e){const t=e.getAttribute("target"),n=e.getAttribute("rel");return t==="_blank"||t==="_external"||n==="external"||e.hasAttribute("download")}function no(e){if(e.startsWith("#"))return!0;const t=n=>n.split("#")[0];return!!(e.includes("#")&&t(e)===t(window.location.href))}function ro(e){const t=Vt();s(Te(t));const{hasBaseServer:n}=M(e,t);return n}function io(e,t){let n=oo(e,t);return n==="viewport"&&!e._isProduction&&(Ce(!1,"Viewport prefetching is disabled in development",{onlyOnce:!0}),n="hover"),{prefetchStaticAssets:n}}function oo(e,t){{const n=so(t);if(n!==null)return n}if("prefetchLinks"in e.exports&&d(!1,"`export { prefetchLinks }` is deprecated, use `export { prefetchStaticAssets }` instead."),"prefetchStaticAssets"in e.exports){const{prefetchStaticAssets:n}=e.exports;if(n===!1)return!1;if(n==="hover")return"hover";if(n==="viewport")return"viewport";const r="prefetchStaticAssets value should be false, 'hover', or 'viewport'";d(I(n),r);const i=Object.keys(n);d(i.length===1&&i[0]==="when",r);const{when:o}=n;if(o==="HOVER"||o==="VIEWPORT"){const a=o.toLowerCase();return b(!1,`prefetchStaticAssets value \`{ when: '${o}' }\` is outdated: set prefetchStaticAssets to '${a}' instead`,{onlyOnce:!0}),a}d(!1,r)}return"hover"}function so(e){const t=e.getAttribute("data-prefetch-static-assets"),n=e.getAttribute("data-prefetch");if(t===null&&n===null)return null;const r="The attribute data-prefetch is outdated, use data-prefetch-static-assets instead.";if(t){if(d(n===null,r),t==="hover"||t==="viewport")return t;if(t==="false")return!1;d(!1,`data-prefetch-static-assets has value "${t}" but it should instead be "false", "hover", or "viewport"`)}if(n){if(s(!t),b(!1,r,{onlyOnce:!0}),n==="true")return"viewport";if(n==="false")return"hover";d(!1,`data-prefetch has value "${n}" but it should instead be "true" or "false"`)}s(!1)}const Kt=new Map;function qt(e){const t=Qt(e);return Kt.has(t)}function Xt(e){const t=Qt(e);Kt.set(t,!0)}function Qt(e){return M(e,"/").pathname}W();const nt=new Map;async function ao(e){if(d(ft(),"prefetch() only works with Client Routing, see https://vite-plugin-ssr.com/prefetch",{showStackTrace:!0}),d(!Mt(e),`You are trying to prefetch the URL ${e} of another domain which cannot be prefetched`,{showStackTrace:!0}),qt(e))return;Xt(e);const{pageId:t,pageFilesAll:n,pageConfigs:r}=await Gt(e);if(t)try{await ie(n,r,t)}catch(i){if($e(i))Ee(i,!0);else throw i}}function lo(e){Xt(e.urlPathname),[...document.getElementsByTagName("A")].forEach(n=>{if(nt.has(n))return;nt.set(n,!0);const r=n.getAttribute("href");if(Jt(n)||(s(r),qt(r)))return;const{prefetchStaticAssets:i}=io(e,n);if(i&&(i==="hover"&&(n.addEventListener("mouseover",()=>{me(r)}),n.addEventListener("touchstart",()=>{me(r)},{passive:!0})),i==="viewport")){const o=new IntersectionObserver(a=>{a.forEach(l=>{l.isIntersecting&&(me(r),o.disconnect())})});o.observe(n)}})}async function me(e){try{if(!await Yt(e))return}catch{return}await ao(e)}async function uo(e,t){const n=ke(e,t);let r=null,i;r=z(e,"render"),i="render";{const l=z(e,"onRenderClient");l&&(r=l,i="onRenderClient")}if(!r){const l=co(e);if(e._pageConfigs.length>0)d(!1,`No onRenderClient() hook defined for URL '${l}', but it's needed, see https://vite-plugin-ssr.com/onRenderClient`);else{const u=e._pageFilesLoaded.filter(h=>h.fileType===".page.client");let c;u.length===0?c="No file `*.page.client.*` found for URL "+l:c="One of the following files should export a `render()` hook: "+u.map(h=>h.filePath).join(" "),d(!1,c)}}s(r);const o=r.hookFn;s(i);const a=await ce(()=>o(n),i,r.hookFilePath);d(a===void 0,`The ${i}() hook defined by ${r.hookFilePath} isn't allowed to return a value`)}function co(e){let t;try{t=e.urlPathname??e.urlOriginal}catch{}return t=t??window.location.href,t}function Zt(){let e=window.history.state;e||(e={});let t=!1;"timestamp"in e||(t=!0,e.timestamp=tn()),"scrollPosition"in e||(t=!0,e.scrollPosition=en()),nn(e),t&&je(e)}function Ie(){const e=window.history.state||{};return nn(e),e}function en(){return{x:window.scrollX,y:window.scrollY}}function tn(){return new Date().getTime()}function rt(){const e=en(),t=Ie();je({...t,scrollPosition:e})}function fo(e,t){if(t)je(Ie(),e);else{const n=tn();go({timestamp:n,scrollPosition:null},e)}}function nn(e){if(s(w(e)),"timestamp"in e){const{timestamp:t}=e;s(typeof t=="number")}if("scrollPosition"in e){const{scrollPosition:t}=e;t!==null&&s(g(t,"x","number")&&g(t,"y","number"))}}function je(e,t){window.history.replaceState(e,"",t??null)}function go(e,t){window.history.pushState(e,"",t)}W();const ho=O("navigate.ts",{});function po(e){ho.navigate=e}const E=O("useClientRouter.ts",{previousState:se()});Eo();Zt();function Ee(e,t){s($e(e)),E.clientRoutingIsDisabled=!0,t&&console.log(e),Ce(!1,["Failed to fetch static asset.","This usually happens when a new frontend is deployed.","Falling back to Server Routing.","(The next page navigation will use Server Routing instead of Client Routing.)"].filter(Boolean).join(" "),{onlyOnce:!0})}function mo(){wo(),yo((i,{keepScrollPosition:o})=>{r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:i,isBackwardNavigation:!1,checkClientSideRenderable:!0})}),vo((i,o)=>{r({scrollTarget:i,isBackwardNavigation:o})}),po(async(i,{keepScrollPosition:o=!1,overwriteLastHistoryEntry:a=!1}={})=>{await r({scrollTarget:o?"preserve-scroll":"scroll-to-top-or-hash",urlOriginal:i,overwriteLastHistoryEntry:a,isBackwardNavigation:!1,checkClientSideRenderable:!0})});let e=0,t,n=!1;r({scrollTarget:"preserve-scroll",isBackwardNavigation:null});return;async function r({scrollTarget:i,urlOriginal:o=K(),overwriteLastHistoryEntry:a=!1,isBackwardNavigation:l,checkClientSideRenderable:u,pageContextsFromRewrite:c=[],redirectCount:h=0}){var Be;if(_i(c.length,h),E.clientRoutingIsDisabled){ne(o);return}const f=Fi(c);if(u){const F=f._urlRewrite??o;let S;try{S=await Yt(F)}catch(Ne){if(he(Ne))S=!0;else throw Ne}if(!S){ne(o);return}}const v={urlOriginal:o,isBackwardNavigation:l,...f},p=++e;s(p>=1),p>1&&n===!1&&((Be=E.onPageTransitionStart)==null||Be.call(E,v),n=!0);let R=!1;const _=()=>p===1&&R===!1?!1:p!==e,y=await zt(v);if(_())return;const H=p===1;m(y,{_isFirstRenderAttempt:H});let q,T,Le=!1;try{q=await Ci(y)}catch(F){Le=!0,T=F}if(Le){if(he(T)||console.error(T),ot(T,y))return;if(he(T)){const F=T;Ei(T,y._isProduction,y);const S=F._pageContextAbort;if(S._urlRewrite){await r({scrollTarget:i,urlOriginal:o,overwriteLastHistoryEntry:a,isBackwardNavigation:l,pageContextsFromRewrite:[...c,S],redirectCount:h});return}if(S._urlRedirect){await r({scrollTarget:"scroll-to-top-or-hash",urlOriginal:S._urlRedirect.url,overwriteLastHistoryEntry:!1,isBackwardNavigation:!1,checkClientSideRenderable:!0,pageContextsFromRewrite:c,redirectCount:h++});return}s(S.abortStatusCode),m(y,S)}else m(y,{is404:Di(T)});try{q=await Ti(y)}catch(F){if(ot(F,y)||(H||setTimeout(()=>{window.location.pathname=o},0),Ir(T,F)))return;throw F}}if(s(q),m(y,q),ge(y,"onPageTransitionStart"),E.onPageTransitionStart=y.exports.onPageTransitionStart,y.exports.hydrationCanBeAborted?R=!0:b(!$r(),"You seem to be using React; we recommend setting `hydrationCanBeAborted` to `true`, see https://vite-plugin-ssr.com/clientRouting",{onlyOnce:!0}),!_()&&(t&&await t,!_())){if(bo(o,a),_t.markNavigationChange(),s(t===void 0),t=(async()=>{await uo(y,!0),lo(y)})(),await t,t=void 0,y._isFirstRenderAttempt){ge(y,"onHydrationEnd");const{onHydrationEnd:F}=y.exports;if(F){const S=y.exportsAll.onHydrationEnd[0].exportSource;s(S),await ce(()=>F(y),"onHydrationEnd",S)}}else p===e&&(y.exports.onPageTransitionEnd&&(ge(y,"onPageTransitionEnd"),y.exports.onPageTransitionEnd(y)),n=!1);rn(i),De(),E.initialRenderIsDone=!0}}}function yo(e){document.addEventListener("click",t);return;function t(i){if(!n(i))return;const o=r(i.target);if(!o)return;const a=o.getAttribute("href");if(Jt(o))return;s(a),i.preventDefault();const l=![null,"false"].includes(o.getAttribute("keep-scroll-position"));e(a,{keepScrollPosition:l})}function n(i){return i.button===0&&!i.ctrlKey&&!i.shiftKey&&!i.altKey&&!i.metaKey}function r(i){for(;i.tagName!=="A";){const{parentNode:o}=i;if(!o)return null;i=o}return i}}function vo(e){window.addEventListener("popstate",()=>{const t=se(),n=t.historyState.scrollPosition||"scroll-to-top-or-hash",r=t.urlWithoutHash===E.previousState.urlWithoutHash,i=!t.historyState.timestamp||!E.previousState.historyState.timestamp?null:t.historyState.timestamp<E.previousState.historyState.timestamp;E.previousState=t,r?window.history.state===null?(Zt(),E.previousState=se()):rn(n):e(n,i)})}function bo(e,t){K()!==e&&(De(),fo(e,t),E.previousState=se())}function se(){return{urlWithoutHash:K({withoutHash:!0}),historyState:Ie()}}function rn(e){if(e==="preserve-scroll")return;let t;if(e==="scroll-to-top-or-hash"){const n=Ro();if(n&&n!=="top"){const r=document.getElementById(n)||document.getElementsByName(n)[0];if(r){r.scrollIntoView();return}}t={x:0,y:0}}else s("x"in e&&"y"in e),t=e;Po(t)}function Po(e){const t=()=>window.scrollTo(e.x,e.y),n=()=>window.scrollX===e.x&&window.scrollY===e.y;n()||(t(),!n()&&requestAnimationFrame(()=>{t(),!n()&&setTimeout(async()=>{if(t(),n())return;const r=new Date().getTime();for(;;)if(await jr(10),t(),n()||new Date().getTime()-r>100)return},0)}))}function wo(){window.addEventListener("scroll",Dr(rt,Math.ceil(1e3/3)),{passive:!0}),on(rt)}function Ro(){let{hash:e}=window.location;return e===""?null:(s(e.startsWith("#")),e=e.slice(1),e)}function Eo(){it(),on(it),Fo(()=>E.initialRenderIsDone&&De())}function De(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")}function it(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="auto")}function on(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})}function Fo(e){window.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&e()})}function ot(e,t){return!!(Bi(e)||So(e,t))}function So(e,t){if(!$e(e))return!1;if(t._isFirstRenderAttempt)throw Ee(e,!1),e;return Ee(e,!0),ne(t.urlOriginal),!0}function _o(){return!!window._disableAutomaticLinkInterception}W();const Co=!0;fn(Co);mo();
